{% set ety_url = url ~ 'etymology/?w=' %}
{% set dict_url = url ~ 'dictionary/?w=' %}
{% extends 'layout.html.twig' %}
{% set is_auth = user is defined and user %}

{% block head %}
    <link rel="stylesheet" href="https://unpkg.com/vis-network@10.0.2/styles/vis-network.css">
{% endblock %}

{% block title %}
    {% if hasEty %}
        {{ word|capitalize }}
        Etymology, History and Origins | EtyDict
    {% else %}
        Etymology | EtyDict
    {% endif %}
{% endblock %}

{% block body %}
    <div class="container py-5">
        {% if not hasEty %}
            <h1 class="display-5 fw-bold mb-3 text-center">Etymology Explorer</h1>
        {% endif %}
        {% include 'ety_search_container.html.twig'  %}
        {% if hasEty %}
            <div class="d-flex align-items-center card shadow-sm border-0 justify-content-center gap-5 p-3 mx-auto rounded-5 rounded-bottom-0 flex-row">
                <p id="word-title" class="display-5 fw-bold">{{ word|capitalize }}</p>
                <button class="btn mx-0 toggle-fav-btn" data-word="{{ word }}" data-favorite-type="etymology" data-favorited="{{ is_favorite ? 'true' : 'false' }}" data-auth="{{ is_auth ? 'true' : 'false' }}" title="Add to Favorites">
                    {% if is_favorite %}
                        <img src="{{ url }}assets/img/star_on.svg" alt="starred" width="24" height="24">
                    {% else %}
                        <img src="{{ url }}assets/img/star_off.svg" alt="not starred" width="24" height="24">
                    {% endif %}
                </button>
                {% if dict_available %}
                    <a id="dict-btn" class="fw-4 btn dict-btn btn-primary" title="Dictionary" href="{{ dict_url ~ word|replace({' ': '+'}) }}">
                        <img src="{{ url }}assets/img/dict-logo.webp" alt="dictionary entry" width="30" height="30">&nbsp;
                        <span class="">Dictionary</span>
                    </a>
                {% endif %}
            </div>
            <div id="etymology-canvas" class="w-100 mb-5 mt-0 rounded p-0 border border-dark-subtle">
            </div>
        {% elseif suggestions is defined and suggestions %}
        {% endif %}
        <div class="d-flex card shadow-sm border-0 p-5 mx-auto rounded-5 flex-lg-row flex-column">
            <div class="flex-fill px-5 px-md-3 px-xl-5 d-flex flex-column gap-2">
                <h1 class="text-center display-6 fw-semibold">Trending words</h1>
                <ol class="list-group list-group-numbered list-group-flush fs-4">
                    {% for trending_word in trending_words %}
                        <li class="list-group-item"><a href="{{ety_url ~ trending_word}}" class="px-3 text-decoration-none fw-semibold text-success-emphasis text-bg-light rounded-5">{{trending_word}}</a></li>
                    {% endfor %}
                </ol>
            </div>
            <div class="d-none d-lg-block border-end border-2 border-dark-subtle mx-2"></div>
            <div class="flex-fill px-5 px-md-3 px-xl-5 d-flex flex-column gap-2">
                <h1 class="text-center display-6 fw-semibold">Popular words</h1>
                <ol class="list-group list-group-numbered list-group-flush fs-4">
                    {% for popular_word in popular_words %}
                        <li class="list-group-item"><a href="{{ety_url ~ popular_word}}" class="px-3 text-decoration-none fw-semibold text-success-emphasis text-bg-light rounded-5">{{popular_word}}</a></li>
                    {% endfor %}
                </ol>
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    <script src="https://unpkg.com/vis-network@10.0.2/standalone/umd/vis-network.js"></script>
    <script src="{{ url }}assets/js/etymology.js"></script>
{% endblock %}